machine:
  ruby:
    version: 2.1.0

database:
  override:
    # replace CircleCI's generated database.yml
    # this gem uses sqlite in a dummy app anyway
    - echo "noop"

test:
  pre:
    # set up avatax login API keys
    - cp spec/support/config_preferences.example.rb spec/support/config_preferences.rb
    # build dummy app
    - bundle exec rake test_app:
        environment:
          RAILS_ENV: test
          RACK_ENV: test